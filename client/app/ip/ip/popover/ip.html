<div data-ng-if="ipBlock.version === 'IPV6'"
     data-uib-dropdown
     data-dropdown-append-to-body>

    <button type="button"
            class="btn btn-link dropdown-toggle"
            title="{{:: 'common_actions' | UAi18n }}"
            data-uib-dropdown-toggle>
        <span class="ovh-font ovh-font-dots align-top"
              aria-label="{{:: 'common_actions' | UAi18n }}"
              aria-hidden="true">
        </span>
    </button>

    <!-- IPv6 -->
    <ul class="dropdown-menu-right"
        data-uib-dropdown-menu>

        <li data-ng-if="ipBlock.isUniq">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/block/description/edit/ip-ip-block-description-edit', { ipBlock: ipBlock })"
                    data-ng-bind="ipBlock.description && tr('ip_description_edit_title') || tr('ip_description_new_title')">
            </button>
        </li>

        <li>
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/reverse/update/ip-ip-reverse-update', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_reverse">
            </button>
        </li>

    </ul>
</div>

<div data-ng-if="ipBlock.version === 'IPV4'"
     data-uib-dropdown
     data-dropdown-append-to-body>

    <button type="button"
            class="btn btn-link dropdown-toggle"
            title="{{:: 'common_actions' | UAi18n }}"
            data-uib-dropdown-toggle>
        <span class="ovh-font ovh-font-dots align-top"
              aria-label="{{:: 'common_actions' | UAi18n }}"
              aria-hidden="true">
        </span>
    </button>

    <!-- IPv4 -->
    <ul class="dropdown-menu-right"
        data-uib-dropdown-menu>

        <!-- DESCRIPTION -->
        <li data-ng-if="ipBlock.isUniq">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/block/description/edit/ip-ip-block-description-edit', { ipBlock: ipBlock })"
                    data-ng-bind="ipBlock.description && tr('ip_description_edit_title') || tr('ip_description_new_title')">
            </button>
        </li>

        <!-- REVERSE -->
        <li>
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/reverse/update/ip-ip-reverse-update', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_reverse">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ipBlock.service.category !== 'CLOUD' || ipBlock.type === 'FAILOVER'"
            role="separator">
        </li>

        <!-- VIRTUAL MAC -->
        <li data-ng-if="ipBlock.type === 'FAILOVER'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/virtual-mac/add/ip-ip-virtual-mac-add', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_add_virtualmac"
                    data-ng-disabled="ipBlock.service.category !== 'DEDICATED' || ipBlock.service.virtualmac.status !== 'OK' || ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]"
                    data-tooltip-placement="left"
                    data-uib-tooltip="{{ ipBlock.service.category === 'DEDICATED' && ipBlock.service.virtualmac.status === 'OK' && ipBlock.service.virtualmac.virtualMacsByIp[ip.ip] ? getVirtualMacMessage(ipBlock) : '' }}">
            </button>
        </li>
        <li data-ng-if="ipBlock.service.category === 'DEDICATED' && ipBlock.type == 'FAILOVER' && ipBlock.service.virtualmac.status === 'OK' && ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/virtual-mac/ip-ip-virtual-mac', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_view_virtualmac">
            </button>
        </li>
        <li data-ng-if="ipBlock.service.category == 'DEDICATED' && ipBlock.type == 'FAILOVER' && ipBlock.service.virtualmac.status === 'OK' && ipBlock.service.virtualmac.virtualMacsByIp[ip.ip]">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/virtual-mac/delete/ip-ip-virtual-mac-delete', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_del_virtualmac">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ip.mitigation && ipBlock.service.category !== 'HOUSING'"
            role="separator">
        </li>

        <!-- MITIGATION::SWITCH DEFAULT > PERMANENT -->
        <li data-ng-if="(!ip.mitigation || ip.mitigation == 'DEFAULT') && ipBlock.service.category !== 'HOUSING'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/mitigation/update/ip-ip-mitigation-update', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_mitigation_DEFAULT_to_PERMANENT">
            </button>
        </li>
        <!-- MITIGATION::SWITCH PERMANENT > DEFAULT -->
        <li data-ng-if="ip.mitigation == 'PERMANENT' && ipBlock.service.category !== 'HOUSING'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/mitigation/update/ip-ip-mitigation-update', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_mitigation_PERMANENT_to_AUTO">
            </button>
        </li>

        <!-- MITIGATION::STATS -->
        <li data-ng-if="(ip.mitigation == 'PERMANENT' || ip.mitigation == 'FORCED')">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/mitigation/statistics/ip-ip-mitigation-statistics', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_mitigation_stats">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'HOUSING'"
            role="separator">
        </li>

        <!-- GAME MITIGATION -->
        <li data-ng-if="ip.gameMitigation && ipBlock.service.category !== 'CLOUD'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="displayGameFirewall(ipBlock, ip)"
                    data-i18n-static="ip_table_manage_game_mitigation">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ip.mitigation !== 'CREATION_PENDING' && ip.mitigation !== 'REMOVAL_PENDING' && ipBlock.service.category !== 'HOUSING'"
            role="separator">
        </li>

        <!-- FIREWALL::NEW -->
        <li data-ng-if="ip.mitigation != 'FORCED' && ip.firewall == 'NOT_CONFIGURED' && ipBlock.service.category !== 'HOUSING'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_firewall_configure">
            </button>
        </li>
        <!-- FIREWALL::ENABLE -->
        <li data-ng-if="ip.mitigation != 'FORCED' && ip.firewall == 'DEACTIVATED'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_firewall_enable">
            </button>
        </li>
        <!-- FIREWALL::DISABLE -->
        <li data-ng-if="(!ip.mitigation || ip.mitigation == 'DEFAULT') && ip.firewall == 'ACTIVATED'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/firewall/toggle/ip-ip-firewall-toggle', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_firewall_disable">
            </button>
        </li>
        <!-- FIREWALL::DISABLED -->
        <li data-ng-if="ip.mitigation && ip.mitigation != 'DEFAULT'">
            <button type="button"
                    class="btn btn-link"
                    data-i18n-static="ip_table_manage_firewall_disable"
                    data-tooltip-placement="left"
                    data-uib-tooltip="{{i18n.ip_table_manage_firewall_disable_tooltip}}"
                    disabled>
            </button>
        </li>
        <!-- FIREWALL::CONFIGURE -->
        <li data-ng-if="ip.firewall && ip.firewall != 'NOT_CONFIGURED'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="displayFirewall(ipBlock, ip)"
                    data-i18n-static="ip_table_manage_firewall_rules">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ip.spam === 'BLOCKED_FOR_SPAM' || ip.arp === 'BLOCKED'"
            role="separator">
        </li>

        <!-- SPAM::UNBLOCK -->
        <li data-ng-if="ip.spam === 'BLOCKED_FOR_SPAM'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="displayAntispam(ipBlock, ip)"
                    data-i18n-static="ip_table_manage_antispam_unblock">
            </button>
        </li>

        <!-- ANTIHACK::UNBLOCK -->
        <li data-ng-if="ip.antihack === 'BLOCKED'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/antihack/ip-ip-antihack', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_view_antihack">
            </button>
        </li>

        <!-- ARP::UNBLOCK -->
        <li data-ng-if="ip.arp === 'BLOCKED'">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/arp/ip-ip-arp', { ipBlock: ipBlock, ip: ip })"
                    data-i18n-static="ip_table_manage_view_arp">
            </button>
        </li>

        <li class="divider"
            data-ng-if="ipBlock.type == 'FAILOVER' && ipBlock.isUniq"
            role="separator">
        </li>

        <!-- ORGANISATION -->
        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq && ipBlock.organizationId">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/organisation/view/ip-ip-organisation-view', { ipBlock: ipBlock })"
                    data-i18n-static="ip_table_manage_view_iporganisation_details">
            </button>
        </li>

        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq && ipBlock.organizationId">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/organisation/change/ip-ip-organisation-change', { ipBlock: ipBlock })"
                    data-i18n-static="ip_table_manage_view_iporganisation_change">
            </button>
        </li>

        <!-- IPMOVE -->
        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/block/move/ip-ip-block-move', { ipBlock: ipBlock })"
                    data-i18n-static="ip_table_manage_move_ipblock">
            </button>
        </li>

        <!-- IP DELETE -->
        <li data-ng-if="ipBlock.type === 'FAILOVER' && ipBlock.isUniq">
            <button type="button"
                    class="btn btn-link"
                    data-ng-click="setAction('ip/block/delete/ip-ip-block-delete', { ipBlock: ipBlock })"
                    data-ng-disabled="!ipBlock.canBeTerminated"
                    data-uib-tooltip="{{ !ipBlock.canBeTerminated ? tr('ip_failover_impossible_delete') : '' }}"
                    data-tooltip-placement="left"
                    data-i18n-static="ip_table_manage_delete_ipblock">
            </button>
        </li>

    </ul>
</div>
