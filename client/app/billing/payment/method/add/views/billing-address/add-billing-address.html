<div class="billing-payment-method-add-billing-address">

    <div class="text-center"
         data-ng-if="$ctrl.loading.init">
        <oui-spinner></oui-spinner>
    </div>

    <oui-tabs class="mb-3"
              data-ng-if="!$ctrl.loading.init">
        <oui-tabs-item data-heading="{{ :: 'billing_payment_method_add_billing_address_existing' | translate }}"
                       data-on-active="$ctrl.onExistingContactTabActive()">
            <div class="row">
                <div class="col-sm-9">
                    <dl class="dl-horizontal">
                        <dt data-ng-class="{ 'mt-2': $ctrl.contactList.length > 1 }"
                            data-translate="billing_payment_method_add_billing_address_contact_name">
                        </dt>
                        <dd>
                            <span data-ng-if="$ctrl.contactList.length === 1"
                                  data-ng-bind="$ctrl.model.existingContact.fullName">
                            </span>
                            <oui-select data-ng-if="$ctrl.contactList.length > 1"
                                        data-name="contact"
                                        data-model="$ctrl.model.existingContact"
                                        data-items="$ctrl.contactList"
                                        data-match="fullName"
                                        data-searchable
                                        data-on-change="$ctrl.onContactSelectChange()">
                                <span class="d-block text-truncate w-100"
                                      data-ng-bind="$item.fullName">
                                </span>
                                <small>
                                    <span class="d-block text-truncate w-100"
                                          data-ng-bind="$item.address.line1">
                                    </span>
                                    <span class="d-block text-truncate w-100"
                                          data-ng-bind="($item.address.zip || '') + ' ' + ($item.address.city || '')  + ' (' + $item.address.country + ')'">
                                    </span>
                                </small>
                            </oui-select>
                        </dd>

                        <dt data-translate="billing_payment_method_add_billing_address_contact_address"></dt>
                        <dd>
                            <span class="d-block text-truncate w-100"
                                  data-ng-bind="$ctrl.model.existingContact.address.line1">
                            </span>
                            <span class="d-inline-block  text-truncate w-100"
                                  data-ng-bind="($ctrl.model.existingContact.address.zip || '') + ' ' + ($ctrl.model.existingContact.address.city || '')  + ' (' + $ctrl.model.existingContact.address.country + ')'">
                            </span>
                        </dd>

                        <dt data-translate="billing_payment_method_add_billing_address_contact_phone"></dt>
                        <dd data-ng-bind="$ctrl.model.existingContact.phone"></dd>

                        <dt data-translate="billing_payment_method_add_billing_address_contact_email"></dt>
                        <dd data-ng-bind="$ctrl.model.existingContact.email"></dd>
                    </dl>
                </div>
            </div>
        </oui-tabs-item>
        <oui-tabs-item data-heading="{{ :: 'billing_payment_method_add_billing_address_create' | translate }}"
                       data-on-active="$ctrl.onNewContactTabActive()">
            <ovh-contact-form data-ng-if="$ctrl.model.activeTab === 'new'"
                              data-mode="fieldset"
                              data-model="$ctrl.model.newContact"
                              data-predefined-profile="billing">
            </ovh-contact-form>
        </oui-tabs-item>
    </oui-tabs>

</div>
