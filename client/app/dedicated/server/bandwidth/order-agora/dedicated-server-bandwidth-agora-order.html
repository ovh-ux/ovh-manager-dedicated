<div data-ng-controller="ServerOrderAgoraBandwidthCtrl as ctrl">
    <div data-wizard
         data-wizard-on-cancel="resetAction"
         data-wizard-on-finish="order"
         data-wizard-title=":: 'server_order_bandwidth_title' | translate"
         data-wizard-bread-crumb
         data-wizard-confirm-button-text=":: 'wizard_pay' | translate">

        <div data-wizard-step
             data-wizard-step-valid="ctrl.steps[0].isValid()"
             data-wizard-step-on-load="initFirstStep">
            <div class="text-center" data-ng-if="ctrl.steps[0].isLoading()">
                <oui-spinner></oui-spinner>
                <span data-translate="server_order_bandwidth_load"></span>
            </div>
            <span data-ng-if="ctrl.plans.length === 0" data-translate="server_order_bandwidth_empty_plans"></span>
            <form data-ng-if="!ctrl.steps[0].isLoading() && ctrl.plans.length > 0">
                <label class="control-label" data-translate="select_bandwidth_type_label"></label>
                <div data-ng-repeat="plan in ctrl.plans track by $index">
                    <div class="row">
                        <div class="col-md-9 pr-0">
                            <oui-radio data-name="bandwidth-plan" data-model="ctrl.model.plan" data-value="plan.planCode">
                                <span data-translate="{{ 'plan_' + plan.planCode }}"></span>
                            </oui-radio>
                        </div>
                        <div class="col-md-3 pl-0">
                            <b class="red"><span data-ng-bind-html="plan.prices[2].price.text"></span></b>
                            <i class="small"><span data-translate="plan_price_per_month"></span></i>
                        </div>
                    </div>
                </div>
                <small data-translate="server_order_bandwidth_declaration"></small>
            </form>
        </div>
        <div data-wizard-step
            data-wizard-step-valid="ctrl.steps[1].isValid()"
            data-wizard-step-on-load="initSecondStep">
            <div class="text-center" data-ng-if="ctrl.steps[1].isLoading()">
                <oui-spinner></oui-spinner>
                <span data-translate="server_order_bandwidth_vrack_load"></span>
            </div>
            <form data-ng-if="!ctrl.steps[1].isLoading()">
                <label class="control-label" data-translate="select_bandwidth_plan_summary"></label>
                <div class="row">
                    <div class="col-md-8 pr-0">
                        <oui-radio data-name="bandwidth-plan" data-model="ctrl.model.plan" data-value="ctrl.provisionalPlan.planCode">
                            <span data-translate="{{ 'plan_' + ctrl.provisionalPlan.planCode }}"></span>
                        </oui-radio>
                    </div>
                    <div class="col-md-4 pl-0">
                        <span data-ng-bind-html="ctrl.provisionalPlan.order.prices | ducPrice:ctrl.user.ovhSubsidiary"></span>
                    </div>
                </div>
                <oui-checkbox data-model="ctrl.model.autoPay" class="mt-3"><span data-translate="server_order_bandwidth_auto_pay"></span></oui-checkbox>
            </form>
        </div>
    </div>
</div>
