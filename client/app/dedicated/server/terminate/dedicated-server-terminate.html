<div data-ng-controller="ServerTerminateCtrl as ctrl">

    <div data-wizard
         data-wizard-on-cancel="resetAction"
         data-wizard-on-finish="submitCancelSubscription"
         data-wizard-title="::'server_close_service' | translate">

        <div data-wizard-step
             data-wizard-step-valid="ctrl.cancelSubscriptionForm.cancelMethod">

            <div class="text-center"
                 data-ng-if="ctrl.cancelSubscriptionForm.isSubmiting">
                <oui-spinner></oui-spinner>
            </div>

            <p data-ng-if="server.engagement"
               data-translate="common_resiliate_contact_support"></p>

            <div data-ng-if="!ctrl.cancelSubscriptionForm.isSubmiting && !server.engagement">
                <div class="oui-message oui-message_warning" role="alert">
                    <span class="oui-icon oui-icon-warning_circle oui-icon_bicolor" aria-hidden="true"></span>
                    <p class="oui-message__body">
                        <span data-translate="server_close_service_warning_data_deletion"></span>
                        <span data-ng-if="!ctrl.manualRefund"
                              data-translate="server_close_service_warning_no_refund">
                        </span>
                        <span data-ng-if="ctrl.manualRefund"
                              data-translate="server_close_service_warning_manual_refund">
                        </span>
                    </p>
                </div>
                <form class="mt-4"
                      name="cancelSubscriptionForm"
                      novalidate>
                    <label for="cancelMethod"
                           class="control-label"
                           data-translate="server_close_service_form_label">
                    </label>
                    <select class="form-control"
                            id="cancelMethod"
                            name="cancelMethod"
                            required
                            data-ng-model="ctrl.cancelSubscriptionForm.cancelMethod">
                        <option value="terminate"
                                data-translate="server_close_service_form_option_terminate">
                        </option>
                        <option value="deleteAtExpiration"
                                data-translate="server_close_service_form_option_delete_at_expiration"
                                data-ng-if="!ctrl.serviceInfos.renew.deleteAtExpiration">
                        </option>
                        <option value="cancel"
                                data-ng-if="ctrl.serviceInfos.renew.deleteAtExpiration"
                                data-translate="server_close_service_form_option_cancel">
                        </option>
                    </select>
                </form>
                <div data-ng-if="ctrl.cancelSubscriptionForm.cancelMethod === 'terminate'">
                    <p class="text-danger"
                       data-translate="server_close_service_desc">
                    </p>
                    <p data-translate="server_close_service_question"></p>
                </div>
            </div>

        </div>

    </div>

</div>
