<div data-ng-controller="TaskCtrl as $ctrl">
    <oui-message data-type="warning"
                 data-ng-if="$ctrl.isServiceExpired">
        <span data-translate="server_configuration_service_expired"></span>
    </oui-message>
    <div data-ovh-alert="taskAlert"></div>
    <h2 data-translate="server_tab_task"></h2>

    <oui-datagrid data-rows-loader="$ctrl.loadDatagridTasks($config)"
                  data-ng-if="!$ctrl.isServiceExpired">
        <oui-column data-title=":: 'server_configuration_task_last_action' | translate">
            <span data-ng-bind="$row.lastUpdate | date: 'medium'"></span>
        </oui-column>
        <oui-column data-title=":: 'server_configuration_task_function' | translate">
            <span data-ng-bind="('server_configuration_task_'+ $row.function) | ducTranslateAlt: $row.function"></span>
        </oui-column>
        <oui-column data-title=":: 'server_configuration_task_comment' | translate">
            <span data-ng-bind="$row.comment"></span>
        </oui-column>
        <oui-column data-title=":: 'server_configuration_task_status' | translate">
            <span class="oui-status"
                  data-translate="{{Â 'server_configuration_task_status_' + $row.status }}"
                  data-ng-class="{
                      'oui-status_success': $row.status === $ctrl.TASK_STATUS.DONE,
                      'oui-status_info': $row.status === $ctrl.TASK_STATUS.DOING,
                      'oui-status_danger': $row.status === $ctrl.TASK_STATUS.OVH_ERROR || $row.status === $ctrl.TASK_STATUS.CUSTOMER_ERROR,
                      'oui-status_warning': $row.status === $ctrl.TASK_STATUS.INIT || $row.status === $ctrl.TASK_STATUS.TODO
                  }">
            </span>
        </oui-column>
    </oui-datagrid>
</div>
