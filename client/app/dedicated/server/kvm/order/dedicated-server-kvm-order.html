<div data-ng-controller="KvmOrderCtrl">

    <div data-wizard
         data-wizard-bread-crumb="true"
         data-wizard-on-cancel="resetAction"
         data-wizard-on-finish="confirmOrder"
         data-wizard-title="i18n.server_configuration_impi_order_kvm"
         data-wizard-confirm-button-text="i18n.wizard_pay">

        <!-- Get Durations -->
        <div data-wizard-step
             data-wizard-step-valid="order.durationSelected"
             data-wizard-step-on-load="loadOptionDetails">

            <p data-i18n-static="server_configuration_kvm_order_step1_title"></p>

            <div class="text-center"
                 data-ng-if="!order.details">
                <oui-spinner></oui-spinner>
            </div>

            <div class="radio"
                 data-ng-if="order.details"
                 data-ng-repeat="option in order.details track by $index">
                <label>
                    <input type="radio"
                            name="durationSelected"
                            value="{{ option.duration }}"
                            data-ng-model="order.durationSelected" />
                    <span>{{ option.duration | duration:'longDate' }}</span>
                    <strong class="text-danger float-right"
                            data-ng-bind-html="option.prices | price:user.ovhSubsidiary">
                    </strong>
                </label>
            </div>

        </div>

        <!-- Details -->
        <div data-wizard-step
             data-wizard-step-valid="confirmOrder"
             data-wizard-step-on-load="loadDetail">

            <p data-ng-bind-html="tr('server_configuration_kvm_order_step2_title', [server.name])"></p>
            <dl>
                <dt data-i18n-static="server_configuration_kvm_order_step2_duration"></dt>
                <dd data-ng-bind="order.durationSelected | duration:'mediumDate'"></dd>
                <dt data-i18n-static="server_configuration_kvm_order_step2_details"></dt>
                <dd>
                    <ul>
                        <li data-ng-repeat="detail in orderDetail.details track by $index"
                            data-ng-bind="detail.description">
                        </li>
                    </ul>
                </dd>
                <dt data-i18n-static="server_configuration_kvm_order_step2_price"></dt>
                <dd class="text-danger"
                    data-ng-bind-html="orderDetail.prices | price:user.ovhSubsidiary">
                </dd>
            </dl>
            <p data-ng-bind-html="i18n.server_order_bandwidth_resume"></p>

        </div>

    </div>

</div>
