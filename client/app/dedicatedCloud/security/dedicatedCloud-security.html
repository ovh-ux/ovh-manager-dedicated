<div class="dedicatedCloud-security">

    <h2 data-translate="dedicatedCloud_tab_security"></h2>

    <div class="text-center"
         data-ng-if="$ctrl.loading">
        <oui-spinner></oui-spinner>
    </div>

    <div class="row"
         data-ng-if="!$ctrl.loading">
        <div class="col-sm-9">
            <dl>
                <dt data-translate="dedicatedCloud_SECURITY_expiration_session"></dt>
                <dd data-ng-bind="$ctrl.policies.info.userSessionTimeout == 0 && ('dedicatedCloud_SECURITY_expiration_session_never' | translate) || 'dedicatedCloud_SECURITY_expiration_session_value' | translate:{ t0: $ctrl.policies.info.userSessionTimeout }"></dd>
                <dt data-translate="dedicatedCloud_SECURITY_nb_simultaneous_connection"></dt>
                <dd data-ng-bind="$ctrl.policies.info.userLimitConcurrentSession == 0 && ('dedicatedCloud_SECURITY_nb_simultaneous_connection_none' | translate) || $ctrl.policies.info.userLimitConcurrentSession"></dd>
                <dt data-translate="dedicatedCloud_SECURITY_userAccess_policy"></dt>
                <dd data-translate="{{ 'dedicatedCloud_SECURITY_userAccess_policy_' + $ctrl.policies.info.userAccessPolicy }}"></dd>
                <dt data-translate="dedicatedCloud_SECURITY_logout_policy"></dt>
                <dd data-translate="{{ 'dedicatedCloud_SECURITY_logout_policy_' + $ctrl.policies.info.logoutPolicy }}"></dd>
            </dl>

            <p data-translate="dedicatedCloud_SECURITY_title"></p>
            <oui-datagrid id="pcc-security-datagrid"
                          data-rows-loader="$ctrl.loadPolicies($config)">
                <oui-column data-title=":: 'dedicatedCloud_SECURITY_IP_name' | translate"
                            data-property="network"></oui-column>
                <oui-column data-title=":: 'dedicatedCloud_SECURITY_allow' | translate">
                    <span data-translate="{{ 'dedicatedCloud_configuration_SECURITY_status_' + $row.status }}"></span>
                </oui-column>
                <oui-column data-title=":: 'dedicatedCloud_SECURITY_description' | translate"
                            data-property="description"></oui-column>
                <oui-action-menu data-align="end"
                                 data-compact>
                    <oui-action-menu-item data-text="{{:: 'dedicatedCloud_SECURITY_modify' | translate }}"
                                          data-on-click="setAction('security/update/dedicatedCloud-security-update', $row)">
                    </oui-action-menu-item>
                    <oui-action-menu-item data-text="{{:: 'dedicatedCloud_SECURITY_delete' | translate }}"
                                          data-on-click="setAction('security/delete/dedicatedCloud-security-delete', {
                                              selectedPolicies: [$row]
                                          })">
                    </oui-action-menu-item>
                </oui-action-menu>
            </oui-datagrid>
        </div>

        <div class="col-sm-3">
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/session-timeout/update/dedicatedCloud-security-session-timeout-update', $ctrl.policies.info.userSessionTimeout)"
                    data-translate="dedicatedCloud_SECURITY_change_timeout">
            </button>
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/simultaneous-connection/update/dedicatedCloud-security-max-simultaneous-connection', $ctrl.policies.info.userLimitConcurrentSession)"
                    data-translate="dedicatedCloud_SECURITY_change_nb_simultaneous_connection">
            </button>
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/access/dedicatedCloud-security-access')"
                    data-translate="dedicatedCloud_SECURITY_access_policy">
            </button>
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/logout/dedicatedCloud-security-logout')"
                    data-translate="dedicatedCloud_SECURITY_logout_policy">
            </button>
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/add/dedicatedCloud-security-add')"
                    data-translate="dedicatedCloud_SECURITY_add_IP">
            </button>
            <button type="button"
                    class="btn btn-block btn-default"
                    data-ng-click="setAction('security/delete/dedicatedCloud-security-delete', {
                        selectedPolicies: selectedPolicies,
                        policies: policies.model.list.results
                    })"
                    data-ng-disabled="selectedPolicies.length == 0"
                    data-translate="dedicatedCloud_SECURITY_delete_IP">
            </button>
        </div>
    </div>
</div>
