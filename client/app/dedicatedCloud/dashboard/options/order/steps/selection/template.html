<h3 data-ng-bind="$ctrl.header"></h3>
<p data-ng-bind="$ctrl.subheader"></p>

<form
    data-ng-if="!$ctrl.orderingURL && !$ctrl.orderIsInProgress"
    novalidate
    name="$ctrl.form">

    <oui-message
        data-type="warning"
        data-dismissable="false"
        data-ng-if="!$ctrl.hasDefaultMeansOfPayment"
        class="mb-3">
        <p>
            <span data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_noDefaultMeansOfPayment_1"></span>
            <a
                data-ui-sref="app.account.billing.payment.method"
                data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_noDefaultMeansOfPayment_2"></a>
            <span
                data-ng-if="$ctrl.stepper.steps.length === 1" data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_makeOrderAndConfirmOrderBill"></span>
            <span
                data-ng-if="$ctrl.stepper.steps.length > 1"
                data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_finalOrderStepConfirmOrderBill"></span>
        </p>
    </oui-message>

    <oui-field>
        <div
            data-ng-repeat="servicePack in ::$ctrl.orderableServicePacks track by servicePack.name"
            class="d-flex mb-4"
            data-ng-if="$index % 2 === 0">
            <div
                data-ng-repeat="i in [$index, $index + 1]"
                data-ng-if="$ctrl.orderableServicePacks[i]"
                class="orderSelection__product-container">
                <div
                    class="oui-select-picker oui-select-picker_light orderSelection__product"
                    data-ng-class="{
                        'pr-4' : i % 2 === 0,
                    }">
                    <input
                        class="oui-select-picker__input oui-input"
                        type="radio"
                        name="servicePackSelection"
                        data-ng-model="$ctrl.nameOfServicePackToOrder"
                        data-ng-value="$ctrl.orderableServicePacks[i].name"
                        data-ng-change="$ctrl.selectServicePackToOrder()"
                        id="{{:: 'servicePackSelection' + $ctrl.orderableServicePacks[i].name }}"
                        required>
                    <label
                        class="oui-select-picker__label-container orderSelection__product-content"
                        for="{{:: 'servicePackSelection' + $ctrl.orderableServicePacks[i].name }}">
                        <span
                            class="oui-select-picker__label orderSelection__product-label"
                            data-ng-bind=":: $ctrl.orderableServicePacks[i].displayName"></span>
                        <p
                            class="oui-select-picker__value-container oui-select-picker__section orderSelection__product-description">
                            <span
                                class="dedicatedCloud-servicePack-option-description"
                                data-translate="{{:: $ctrl.orderableServicePacks[i].description }}"></span>
                        </p>
                        <p
                            class="orderSelection__product-price"
                            data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_priceDifferenceOnMonthlyBill"
                            data-translate-values="{
                                priceDifference: $ctrl.orderableServicePacks[i].price
                            }"></p>
                    </label>
                </div>
            </div>
        </div>
    </oui-field>

    <oui-button
        data-variant="secondary"
        data-on-click="$ctrl.stepper.exit()">
        <span data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_cancelButton"></span>
    </oui-button>

    <oui-button
        data-on-click="$ctrl.confirmOrder()"
        data-type="submit"
        data-variant="primary"
        data-disabled="!$ctrl.nameOfServicePackToOrder"
        class="ml-3">
        <span data-translate="{{ :: $ctrl.stepper.steps.length > 1 ? 'dedicatedCloudDashboardTilesOptionsOrderSelection_nextButton' : 'dedicatedCloudDashboardTilesOptionsOrderSelection_checkoutButton' }}"></span>
    </oui-button>
</form>

<div
    data-ng-if="$ctrl.orderIsInProgress"
    class="text-center">
    <oui-spinner data-size="l"></oui-spinner>
</div>

<oui-message
    data-ng-if="$ctrl.orderingURL && !$ctrl.orderIsInProgress"
    data-dismissable="false"
    data-type="info">
    <p>
        <span data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_checkoutDescription"></span>
        <a
            data-ng-href="{{:: $ctrl.orderingURL }}"
            target="_blank"
            rel="noopener"
            class="oui-link_icon">
            <span data-translate="dedicatedCloudDashboardTilesOptionsOrderSelection_checkoutLink"></span>
            <span
                class="oui-icon oui-icon-external_link"
                aria-hidden="true"></span>
            <span
                class="sr-only"
                data-translate="common_new_tab"></span>
        </a>
    </p>
</oui-message>
